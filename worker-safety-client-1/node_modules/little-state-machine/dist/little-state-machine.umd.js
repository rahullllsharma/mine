!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).littleStateMachine={},e.react)}(this,function(e,t){var n=function(){var e,t={},n=[],r="__LSM__";try{e="undefined"!=typeof sessionStorage?window.sessionStorage:{}}catch(t){e={}}return{updateStore:function(n){try{t=JSON.parse(e.getItem(r)||"")||n}catch(e){t=n}},saveStore:function(){e.setItem(r,JSON.stringify(t))},get middleWares(){return n},set middleWares(e){n=e},get state(){return t},set state(e){t=e},get name(){return r},set name(e){r=e},get storageType(){return e},set storageType(t){e=t}}}(),r=t.createContext(void 0),a="onAction";e.StateMachineProvider=function(e){var a=e.children,s=t.useState(n.state);return t.createElement(r.Provider,{value:{state:s[0],setState:s[1]}},a)},e.createStore=function(e,t){t&&(t.name&&(n.name=t.name),t.storageType&&(n.storageType=t.storageType),t.middleWares&&(n.middleWares=t.middleWares),t.persist&&(a=t.persist)),n.updateStore(e)},e.useStateMachine=function(e){var s=t.useContext(r),o=s.state,i=s.setState,u=t.useRef(Object.entries(e||{}).reduce(function(e,t){var r;return Object.assign({},e,((r={})[t[0]]=function(e,t){return function(r){n.state=t(n.state,r),n.middleWares&&(n.state=n.middleWares.reduce(function(e,n){return n(e,t.name,r)||e},n.state)),e(n.state),"onAction"===a&&n.saveStore()}}(i,t[1]),r))},{}));return t.useEffect(function(){"beforeUnload"===a&&(window.onbeforeunload=function(){return n.saveStore()})},[]),{actions:u.current,state:o}}});
//# sourceMappingURL=little-state-machine.umd.js.map
