var e=require("react"),t=function(){var e,t={},r=[],n="__LSM__";try{e="undefined"!=typeof sessionStorage?window.sessionStorage:{}}catch(t){e={}}return{updateStore:function(r){try{t=JSON.parse(e.getItem(n)||"")||r}catch(e){t=r}},saveStore:function(){e.setItem(n,JSON.stringify(t))},get middleWares(){return r},set middleWares(e){r=e},get state(){return t},set state(e){t=e},get name(){return n},set name(e){n=e},get storageType(){return e},set storageType(t){e=t}}}(),r=e.createContext(void 0),n="onAction";exports.StateMachineProvider=function(n){var a=n.children,s=e.useState(t.state);return e.createElement(r.Provider,{value:{state:s[0],setState:s[1]}},a)},exports.createStore=function(e,r){r&&(r.name&&(t.name=r.name),r.storageType&&(t.storageType=r.storageType),r.middleWares&&(t.middleWares=r.middleWares),r.persist&&(n=r.persist)),t.updateStore(e)},exports.useStateMachine=function(a){var s=e.useContext(r),o=s.state,i=s.setState,u=e.useRef(Object.entries(a||{}).reduce(function(e,r){var a;return Object.assign({},e,((a={})[r[0]]=function(e,r){return function(a){t.state=r(t.state,a),t.middleWares&&(t.state=t.middleWares.reduce(function(e,t){return t(e,r.name,a)||e},t.state)),e(t.state),"onAction"===n&&t.saveStore()}}(i,r[1]),a))},{}));return e.useEffect(function(){"beforeUnload"===n&&(window.onbeforeunload=function(){return t.saveStore()})},[]),{actions:u.current,state:o}};
//# sourceMappingURL=little-state-machine.js.map
